cmake_minimum_required(VERSION 3.14)

project(TungstenRuntimeWorkspace LANGUAGES CXX)

if(PROJECT_IS_TOP_LEVEL)
    # Multi-config generators
    if(CMAKE_CONFIGURATION_TYPES)
        set(CMAKE_CONFIGURATION_TYPES
            Debug;Release;RelWithDebInfo;MinSizeRel;Dist
            CACHE STRING "Available configurations" FORCE)
    else()
        # Single-config generators
        set_property(CACHE CMAKE_BUILD_TYPE PROPERTY
                     STRINGS "Debug;Release;RelWithDebInfo;MinSizeRel;Dist")
        if(NOT CMAKE_BUILD_TYPE)
            set(CMAKE_BUILD_TYPE Debug CACHE STRING "" FORCE)
        endif()
    endif()

    set(CMAKE_INTERPROCEDURAL_OPTIMIZATION_RELEASE ON)
    set(CMAKE_INTERPROCEDURAL_OPTIMIZATION_Dist ON)
endif()

set(INT_DIR "${CMAKE_CURRENT_LIST_DIR}")

add_subdirectory(@TUNGSTEN_CORE_SOURCE_DIR@ ${CMAKE_BINARY_DIR}/TungstenCore)

add_subdirectory(@TUNGSTEN_PROJECT_SOURCE_DIR@ ${CMAKE_BINARY_DIR}/@TUNGSTEN_PROJECT_TARGET_NAME@)

add_library(Tungsten::ActiveProject ALIAS @TUNGSTEN_PROJECT_TARGET_NAME@)
set(TUNGSTEN_RUNTIME_EXECUTABLE_NAME "@TUNGSTEN_RUNTIME_EXECUTABLE_NAME@")

add_subdirectory(@TUNGSTEN_RUNTIME_SOURCE_DIR@ ${CMAKE_BINARY_DIR}/TungstenRuntime)